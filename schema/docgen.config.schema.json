{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://github.com/grovetools/docgen/pkg/config/docgen-config",
  "$defs": {
    "DocSectionSource": {
      "properties": {
        "package": {
          "type": "string",
          "description": "Package name (must exist in configured ecosystems)"
        },
        "doc": {
          "type": "string",
          "description": "Explicit path to doc file (auto-discovers schema_to_md output if omitted)"
        },
        "title": {
          "type": "string",
          "description": "H2 section title (e.g."
        },
        "description": {
          "type": "string",
          "description": "Description of what this configuration context is for"
        },
        "properties": {
          "items": {
            "type": "string"
          },
          "type": "array",
          "description": "Properties to document in this section (dot notation supported)"
        }
      },
      "type": "object",
      "required": [
        "package"
      ]
    },
    "LogoConfig": {
      "properties": {
        "input": {
          "type": "string",
          "description": "Path to input logo SVG (relative to base_url root or absolute)"
        },
        "output": {
          "type": "string",
          "description": "Path for output logo-with-text SVG"
        },
        "text": {
          "type": "string",
          "description": "Text to display below logo"
        },
        "font": {
          "type": "string",
          "description": "Path to TTF/OTF font file"
        },
        "color": {
          "type": "string",
          "description": "Text color (hex)"
        },
        "spacing": {
          "type": "number",
          "description": "Spacing between logo and text (default: 35)"
        },
        "text_scale": {
          "type": "number",
          "description": "Text width as proportion of logo (default: 1.1)"
        },
        "width": {
          "type": "number",
          "description": "Output SVG width in pixels (default: 200)"
        }
      },
      "type": "object",
      "required": [
        "input",
        "output",
        "text",
        "font"
      ]
    },
    "ReadmeConfig": {
      "properties": {
        "template": {
          "type": "string",
          "description": "Path to the README template"
        },
        "output": {
          "type": "string",
          "description": "Path to the output README file"
        },
        "source_section": {
          "type": "string",
          "description": "The name of the section to inject into the template"
        },
        "strip_lines": {
          "type": "integer",
          "description": "Number of lines to strip from the top of source file (default: 0)"
        },
        "generate_toc": {
          "type": "boolean",
          "description": "Whether to generate a table of contents from sections"
        },
        "base_url": {
          "type": "string",
          "description": "Base URL for converting root-relative paths to absolute URLs"
        },
        "logo": {
          "$ref": "#/$defs/LogoConfig",
          "description": "Optional logo generation configuration"
        }
      },
      "type": "object",
      "required": [
        "template",
        "output",
        "source_section"
      ]
    },
    "SchemaInput": {
      "properties": {
        "path": {
          "type": "string",
          "description": "Path to the schema file"
        },
        "title": {
          "type": "string",
          "description": "Title for the H2 section"
        }
      },
      "type": "object",
      "required": [
        "path"
      ]
    },
    "SectionConfig": {
      "properties": {
        "name": {
          "type": "string",
          "description": "Unique identifier for this section"
        },
        "title": {
          "type": "string",
          "description": "Display title for the section"
        },
        "order": {
          "type": "integer",
          "description": "Order in which the section appears"
        },
        "schemas": {
          "items": {
            "$ref": "#/$defs/SchemaInput"
          },
          "type": "array",
          "description": "List of schemas to aggregate into one page (for schema_to_md type)"
        },
        "doc_sources": {
          "items": {
            "$ref": "#/$defs/DocSectionSource"
          },
          "type": "array",
          "description": "Sources for pulling from generated package docs (for doc_sections type)"
        },
        "status": {
          "type": "string",
          "enum": [
            "draft",
            "dev",
            "production"
          ],
          "description": "Publication status: draft"
        },
        "prompt": {
          "type": "string",
          "description": "Path to the LLM prompt file"
        },
        "output": {
          "type": "string",
          "description": "Output markdown filename"
        },
        "output_dir": {
          "type": "string",
          "description": "Output directory name for sections mode"
        },
        "json_key": {
          "type": "string",
          "description": "Key for structured JSON output"
        },
        "type": {
          "type": "string",
          "enum": [
            "schema_to_md",
            "doc_sections",
            "capture",
            "nb_concept"
          ],
          "description": "Type of generation: schema_to_md"
        },
        "source": {
          "type": "string",
          "description": "Source identifier. For schema_to_md: path to JSON schema file (deprecated: use schemas instead). For nb_concept: concept ID (e.g. my-concept or workspace:my-concept for cross-workspace)"
        },
        "binary": {
          "type": "string",
          "description": "Binary name for capture type"
        },
        "format": {
          "type": "string",
          "enum": [
            "styled",
            "plain"
          ],
          "description": "Output format for capture type: styled (default) or plain"
        },
        "depth": {
          "type": "integer",
          "description": "Recursion depth for capture type (default: 5)"
        },
        "subcommand_order": {
          "items": {
            "type": "string"
          },
          "type": "array",
          "description": "Priority order for subcommands (rest alphabetical)"
        },
        "model": {
          "type": "string",
          "description": "Per-section model override"
        },
        "agg_strip_lines": {
          "type": "integer",
          "description": "Number of lines to strip from the top during aggregation"
        },
        "temperature": {
          "type": "number",
          "maximum": 1,
          "minimum": 0,
          "description": "Controls randomness in generation (0.0-1.0)"
        },
        "top_p": {
          "type": "number",
          "maximum": 1,
          "minimum": 0,
          "description": "Nucleus sampling parameter (0.0-1.0)"
        },
        "top_k": {
          "type": "integer",
          "minimum": 1,
          "description": "Top-k sampling parameter"
        },
        "max_output_tokens": {
          "type": "integer",
          "minimum": 1,
          "description": "Maximum length of generated content"
        }
      },
      "type": "object",
      "required": [
        "name",
        "title",
        "order",
        "output"
      ]
    },
    "SettingsConfig": {
      "properties": {
        "model": {
          "type": "string",
          "description": "LLM model to use for generation"
        },
        "output_mode": {
          "type": "string",
          "enum": [
            "package",
            "sections"
          ],
          "description": "Output mode: package (default) or sections for website content"
        },
        "ecosystems": {
          "items": {
            "type": "string"
          },
          "type": "array",
          "description": "List of ecosystem names to aggregate from"
        },
        "regeneration_mode": {
          "type": "string",
          "enum": [
            "scratch",
            "reference"
          ],
          "description": "Regeneration mode: scratch or reference"
        },
        "rules_file": {
          "type": "string",
          "description": "Custom rules file for cx generate"
        },
        "structured_output_file": {
          "type": "string",
          "description": "Path for JSON output"
        },
        "system_prompt": {
          "type": "string",
          "description": "Path to system prompt file or 'default' to use built-in"
        },
        "output_dir": {
          "type": "string",
          "description": "Output directory for generated docs"
        },
        "toc_depth": {
          "type": "integer",
          "description": "Maximum heading level to show in Table of Contents (default: 3)"
        },
        "temperature": {
          "type": "number",
          "maximum": 1,
          "minimum": 0,
          "description": "Controls randomness in generation (0.0-1.0)"
        },
        "top_p": {
          "type": "number",
          "maximum": 1,
          "minimum": 0,
          "description": "Nucleus sampling parameter (0.0-1.0)"
        },
        "top_k": {
          "type": "integer",
          "minimum": 1,
          "description": "Top-k sampling parameter"
        },
        "max_output_tokens": {
          "type": "integer",
          "minimum": 1,
          "description": "Maximum length of generated content"
        }
      },
      "type": "object"
    },
    "SidebarCategory": {
      "properties": {
        "icon": {
          "type": "string",
          "description": "Nerd font icon for the category"
        },
        "flat": {
          "type": "boolean",
          "description": "If true"
        },
        "packages": {
          "items": {
            "type": "string"
          },
          "type": "array",
          "description": "Order of packages within this category"
        }
      },
      "type": "object"
    },
    "SidebarConfig": {
      "properties": {
        "category_order": {
          "items": {
            "type": "string"
          },
          "type": "array",
          "description": "Order of categories in sidebar"
        },
        "categories": {
          "additionalProperties": {
            "$ref": "#/$defs/SidebarCategory"
          },
          "type": "object",
          "description": "Category configuration (icon"
        },
        "packages": {
          "additionalProperties": {
            "$ref": "#/$defs/SidebarPackage"
          },
          "type": "object",
          "description": "Package configuration (icon"
        },
        "package_category_override": {
          "additionalProperties": {
            "type": "string"
          },
          "type": "object",
          "description": "Remap packages to different categories"
        }
      },
      "type": "object"
    },
    "SidebarPackage": {
      "properties": {
        "icon": {
          "type": "string",
          "description": "Nerd font icon for the package"
        },
        "color": {
          "type": "string",
          "description": "Color name (green"
        },
        "status": {
          "type": "string",
          "enum": [
            "draft",
            "dev",
            "production"
          ],
          "description": "Publication status: draft"
        }
      },
      "type": "object"
    }
  },
  "properties": {
    "enabled": {
      "type": "boolean",
      "description": "Whether documentation generation is enabled for this package"
    },
    "title": {
      "type": "string",
      "description": "Title of the package documentation"
    },
    "description": {
      "type": "string",
      "description": "Brief description of the package"
    },
    "category": {
      "type": "string",
      "description": "Category for grouping in documentation sidebar"
    },
    "settings": {
      "$ref": "#/$defs/SettingsConfig",
      "description": "Generator-wide settings"
    },
    "sections": {
      "items": {
        "$ref": "#/$defs/SectionConfig"
      },
      "type": "array",
      "description": "List of documentation sections to generate"
    },
    "readme": {
      "$ref": "#/$defs/ReadmeConfig",
      "description": "README synchronization configuration"
    },
    "sidebar": {
      "$ref": "#/$defs/SidebarConfig",
      "description": "Website sidebar configuration"
    },
    "logos": {
      "items": {
        "type": "string"
      },
      "type": "array",
      "description": "Additional logo files to copy during aggregation (absolute paths with ~ expansion)"
    }
  },
  "type": "object",
  "required": [
    "enabled",
    "title",
    "description",
    "category",
    "sections"
  ],
  "title": "Grove Docgen Configuration",
  "description": "Configuration schema for grove-docgen documentation generation."
}